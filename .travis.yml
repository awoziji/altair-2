# R for travis: see documentation at https://docs.travis-ci.com/user/languages/r

language: R
sudo: required
cache: packages

matrix:
  include:
 # - r: devel
  - r: release
#  - r: oldrel

addons:
  apt:
    sources: deadsnakes
    update: true
    packages:
      - python3.6
      - python3.6-venv

before_script:
  - which python3.6
  - sudo rm /usr/bin/python3
  - sudo ln -s /usr/bin/python3.6 /usr/bin/python3
  - sudo apt-get install python3-setuptools
  - sudo easy_install3 pip
  - /usr/bin/python3 -m pip install --upgrade --user travis virtualenv
  - R CMD INSTALL .
  - R -e 'reticulate::py_config()'
  - R -e 'Sys.setenv(RETICULATE_PYTHON = "/usr/bin/python3"); reticulate::virtualenv_create("r-reticulate")'
  - R -e 'reticulate::py_config()'
  - R -e 'altair::install_altair("virtualenv")'
  - R -e 'reticulate::py_config()'
  - R -e 'altair::check_altair(quiet = FALSE)'


# /home/travis/.virtualenvs/r-reticulate/bin/python
